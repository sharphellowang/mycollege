server:
  port: 8080
  servlet:
    context-path: /api

spring:
  profiles:
    active: dev
  jackson:
    default-property-inclusion: non_null
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      indent_output: true
      write_null_map_values: true
      write_dates_as_timestamps: false
    deserialization:
      fail_on_unknown_properties: false
    parser:
      allow_unquoted_control_chars: true
      allow_single_quotes: true
  aop:
    auto: true
    proxy-target-class: true
  transaction:
    rollback-on-commit-failure: true
  resources:
    static-locations: classpath:/static/,classpath:/META-INF/resources/

#  datasource:
#    driver-class-name: com.mysql.cj.jdbc.Driver
#    url: jdbc:mysql://127.0.0.1:3306/testdb?characterEncoding=utf-8&useUnicode=true&useSSL=false&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=convertToNull
#    username: root
#    password: 123456
#    druid:
#      initial-size: 3
#      min-idle: 10
#      max-active: 20
#      max-wait: 30000
#      test-on-borrow: true
#      test-on-return: false
#      PoolPreparedStatements: true,
#      query-timeout: 10
#      validation-query: SELECT 1

  shardingsphere:
    datasource:
      names: ds0,ds1
      ds0:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://127.0.0.1:3306/ds0?characterEncoding=utf-8&useUnicode=true&useSSL=false&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=convertToNull
        username: root
        password: 123456
      ds1:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://127.0.0.1:3306/ds0?characterEncoding=utf-8&useUnicode=true&useSSL=false&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=convertToNull
        username: root
        password: 123456

    sharding:
      binding-tables: user
#      broadcast-tables: t_config
      default-database-strategy:  #默认分库策略
        inline:
          algorithm-expression: ds$->{id % 2}  #按照 {id%2} 来选择数据库
          sharding-column: id # 用于路由的字段
      tables:
        user: # 逻辑表user
          actual-data-nodes: ds$->{0..1}.user->{0..1} # 实际表
          key-generator: # key键的值生成策略
            column: id    # 主键
            type: SNOWFLAKE # 雪花算法
          table-strategy:
            inline:
              algorithm-expression: user->{id % 2} #按照 {id%2} 来选择表
              sharding-column: id
    props:
      sql.show: true
      worker.id: 001 #工作机器唯一id
      max.tolerate.time.difference.milliseconds: 10 #最大容忍时钟回退时间，单位：毫秒
      check.table.metadata.enabled: false  #是否在启动时检查分表元数据一致性


# mybayis相关
mybatis:
    type-aliases-package: com.example.api.orm.entity
    mapper-locations: classpath:mappings/*.xml
mapper:
  mappers:
    - com.example.api.orm.base.TkBaseMapper
  notEmpty: true
  identity: MYSQL
  safeDelete: true
pagehelper:
  helperDialect: mysql
  reasonable: false
  supportMethodsArguments: false
  pageSizeZero: false #pageSize=0


# 业务配置
jpush:
  app-id: 123445
    level: 1
    open: 2
  secret-key: keyyyy

